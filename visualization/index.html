<!DOCTYPE html>
<html lang="en">
<head>
    <title>Rollup Protocol</title>
    <script src="//d3js.org/d3.v5.min.js"></script>
    <script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
    <script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            var conn = new WebSocket("ws://localhost:3000/assertion-chain");
            conn.onclose = function (_evt) {
                var item = document.createElement("div");
                item.innerHTML = "<b>Connection closed.</b>";
            };
            conn.onmessage = function (evt) {
                console.log("rendering " + evt.data);
                d3.select("#assertions").graphviz()
                    .renderDot(evt.data);
                // d3.select("#challenges").graphviz()
                //     .renderDot(evt.data);
            };
        };
    </script>
</head>
<body>
<div style="display:flex;flex-direction:row;margin-top:20px;">
    <div style="border-right:2px solid black;display:inline-flex;width:auto;flex-wrap:wrap;flex-grow:1;padding-left:20px;">
        Assertions
        <br/>
        <div id="assertions" style="margin-top:30px;max-height:100%;"></div>
    </div>
<!--    <div style="display:inline-flex;width:auto;flex-wrap:wrap;flex-grow:1;padding-left: 20px;">-->
<!--        Challenges-->
<!--        <br/>-->
<!--        <div id="challenges" style="margin-top:30px;max-height:100%;"></div>-->
<!--    </div>-->
</div>
</body>
</html>
